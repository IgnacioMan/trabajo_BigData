{"title":"Temporada 2020-2021 F1","markdown":{"yaml":{"title":"Temporada 2020-2021 F1","description":"Resumen temporada 2020-2021","author":"Ignacio Muñoz Ayala (igmuoza@alumni.uv.es)","date":"11-01-2022","categories":["trabajo BigData","F1"],"image":"foto_f1.png","title-block-banner":true,"title-block-banner-color":"red","toc":true,"toc-location":"left","toc-depth":3,"smooth-scroll":true,"format":{"html":{"backgroundcolor":"#209DF0","link-external-newwindow":true}},"code-tools":true,"code-link":true},"headingText":"Intro","containsRefs":false,"markdown":"\n\n\n\nVamos a utilizar datos del usuario `grupoasturias`. Los datos se encuentran en [aquí](https://drive.google.com/drive/folders/17jmy9er05KDhlGpM6bLfvxA3VSN9bBvA)\n\nLa temporada 2020-2021 fue una autentica locura, no solo por la rivalidad entre Hamilton y Vertappen, si no por las luchas que hubieron entre compañeros de equipo, la que hubo por el mundial de pilotos, entre otras muchas cosas.\n\n![](introduccion.jpeg)\n\n\n### Circuitos\n\nEn esa temporada incluyó 22 grandes premios repartidos por todo el mundo, los cuales puedes ver en el siguiente cuadro\n\n```{r}\n\n#Cargo los datos\n\ncircuitos <- qs::qread(\"./datos/races_2021.qs\")\n\n#cargo paquetes\nlibrary(tidyverse)\nlibrary(DT)\n\n\n\n\ndf <- circuitos %>% select(-c(season, circuit_id, race_name, lat, long, locality)) %>% rename(carrera=round, circuito=circuit_name, pais=country, fecha=date, hora=time)\n\n                           \ndf%>%\n  tibble::as_tibble() %>%\n  DT::datatable(filter = 'top', options = list( autoWidth = TRUE))\n\n```\n\n### Pilotos\n\nLa parrilla esta compuesta por los siguientes pilotos\n\n\n```{r}\n#importamos los datos\ndatos_de_pilotos <- qs::qread(\"./datos/drivers_2021.qs\")\n\n#cargamos los paquetes\n\nlibrary(tidyverse)\nlibrary(gt)\n\n#tabla de todos los pilotos\n\n dt <- datos_de_pilotos %>% \n   select( c(familyName, nationality, permanentNumber))\n\n dt%>%\n   tibble::as_tibble() %>%\n   DT::datatable(filter = 'top', options = list( autoWidth = TRUE))\n\n```\n\n\n```{r}\n#importamos los datos\ndatos_de_pilotos <- qs::qread(\"./datos/drivers_2021.qs\")\n\n#cargamos los paquetes\n\nlibrary(tidyverse)\nlibrary(gt)\n\n#tabla con foto del piloto más viejo\n\ndf_max <- datos_de_pilotos %>% select(c(driverId, dateOfBirth, nationality)) %>% slice_min(dateOfBirth,n=1)\n\n\nBandera <- \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Flag_of_Finland.svg/1920px-Flag_of_Finland.svg.png\"\n\ndf_viejo <- df_max %>% add_column(Bandera)\n\nTabla_viejo <- df_viejo %>% gt()\n\nTabla_viejo <- Tabla_viejo %>%\n  tab_header(title = md(\"**Piloto más viejo**\"))\n\nTabla_viejo <- Tabla_viejo %>%\n  tab_options(heading.background.color = \"#0035A5\") %>% tab_options(heading.title.font.size = 15,  column_labels.font.weight =  \"bold\")\n\n\nTabla_viejo <- Tabla_viejo  %>%\n  gt::text_transform(locations = cells_body(columns = c(Bandera)), fn = function(x) {gt::web_image(x, height = 50)}) %>%  cols_align(\n    align = \"center\")\n\n\n\nTabla_viejo\n\n```\n\n\n```{r}\n\ndatos_de_pilotos <- qs::qread(\"./datos/drivers_2021.qs\")\n\n#cargamos los paquetes\n\nlibrary(tidyverse)\nlibrary(gt)\n\ndf_min <- datos_de_pilotos %>% select(c(driverId, dateOfBirth, nationality)) %>% slice_max(dateOfBirth,n=1)\n\n\nBandera <- \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Flag_of_Japan.svg/1280px-Flag_of_Japan.svg.png\"\n\ndf_joven <- df_min %>% add_column(Bandera)\n\nTabla_joven <- df_joven %>% gt()\n\nTabla_joven <- Tabla_joven %>%\n  tab_header(title = md(\"**Piloto más joven**\"))\n\nTabla_joven <- Tabla_joven %>%\n  tab_options(heading.background.color = \"#BA0000\") %>% tab_options(heading.title.font.size = 15,  column_labels.font.weight =  \"bold\")\n\n\nTabla_joven <- Tabla_joven  %>%\n  gt::text_transform(locations = cells_body(columns = c(Bandera)), fn = function(x) {gt::web_image(x, height = 50)}) %>%  cols_align(\n    align = \"center\")\n\n\nTabla_joven\n\n\n\n```\n\n\n## Mundial de constructores\n\nEl mundial de constructores estuvo muy apretado entre Mercedes y Red Bull, durante toda la temporada Hamilton y Verstappen llevaron una rivalidad endiablada con la que iban al límite en las carreras y sumaron prácticamente los mismos puntos para sus equipos, así que los que acabaron decidiendo el mundial de constructores fueron los segundos pilotos de las escuderias.\n\n\n\n```{r}\n#cargo paquetes\nlibrary(qs)\nlibrary(tidyverse)\nlibrary(stats)\nlibrary(dplyr)\n#importo datos\n\nmun_constr <- qs::qread(\"./datos/constructor_standings_2021.qs\")\n\n\n#arreglo datos\n\nmun_constr <- mun_constr %>%  \n  mutate(points= as.numeric(points)) \n\n\n\nff <- mun_constr %>% \n  group_by(constructorId) %>% \n  mutate(puntos = cumsum(points)) %>%\n  filter(round==\"22\") %>%\n  select(-c(\"wins\", \"round\")) %>% \n  arrange((points)) %>% \n  group_by(constructorId)\n\n#hago la tabla\n\n\n\ndf <-ggplot(ff,  aes(x = reorder(constructorId, points), y = points, fill=constructorId)) + geom_col( ) +  coord_flip() +\n  labs(title = \"Clasificación mundial de constructores\", subtitle = \"2020-2021\",x=\"Escuderías\", y=\"Puntos\")\n\ndf\n\n\n```\n\n## Mundial de pilotos\n\nEl mundial de pilotos estuvo muy disputado durante toda la temporada entre Hamilton y Verstappen, muchas veces dependía de si los pilotos corrían en territorio Red Bull o Mercedes, esto se podía aprecias más en la clasificación de antes de la carrera.\n\n```{r}\n#cargamos paquetes\nlibrary(tidyverse)\nlibrary(dplyr)\n\n#importo los datos\nclasificacion_Q <- qs::qread(\"./datos/qualifying_2021.qs\")\n\n#arreglo datos\n\nclasificacion_Q <- clasificacion_Q %>%  \n  mutate(position = as.numeric(position)) %>%\n  mutate(round = as.numeric(round))\n\n#modifico datos\n\nclasi <- clasificacion_Q %>% filter(driverId %in% c(\"max_verstappen\", \"hamilton\")) %>% select(-c(Q1, Q2, Q1_sec, Q2_sec, Q3_sec))\n\n\nclasi <- clasificacion_Q %>%\n  filter(driverId %in% c(\"max_verstappen\", \"hamilton\")) %>%\n  select(-c(Q1, Q2, Q1_sec, Q2_sec, Q3_sec))\n\n\n#más paquetes\nlibrary(ggplot2)\nlibrary(ggthemes)\nlibrary(gganimate)\n\n#hago el gráfico\n\nclasi %>% ggplot(aes(x=round, y=position, color=driverId, group = driverId)) + geom_line(linewidth = 3) +  transition_reveal(round) + labs(title=\"Posición de parrilla\",subtitle = \"Entre Hamilton y Verstappen\" , x=\"Carrera\", y=\"Posición de parrilla\") +  theme_minimal()\n\n\n\n```\n\n\n\nDurante la carrera todo cambiaba, la grada vibraba cuando se acercaban, porque no importaba el circuito que fuese, cuando se cruzaban sabiamos que algo iba a pasar. Tuvimos suerte de vivir un mundial tan igualado y disputado entre estos dos titanes.\n\nAquí teneis un pequeño resumen de la temporada:\n\n```{r, echo = FALSE, out.width = \"60%\"}\nlibrary(\"vembedr\")\nembed_url(\"https://www.youtube.com/watch?v=8skRpKa5lYE&ab_channel=StillWatchingNetflix\")\n```\n\n\nEl desarrollo de puntos durante toda la temporada estuvo muy interesante, y no solo entre Hamilton y Vertappen, también entre compañeros de equipo como pasó en Ferrari, que Carlos Sainz acabaría ganando a Charles Leclerc, al igual que pasaría en Alpine, maxima igualdad entre Fernando Alonso y Esteban Ocon, aquí sería el asturiano el que se llevaría el duelo.\n\n\n\n\n\n\n\n\n```{r}\n#importo los datos\nresult_carr_pilotos <- qs::qread(\"./datos/driver_standings_2021.qs\")\n\n#cargo los paquetes\nlibrary(tidyverse)\nlibrary(dplyr)\nlibrary(ggrepel)\nresult_carr_pilotos<- result_carr_pilotos %>%  \n  mutate(points = as.numeric(points)) %>%\n  mutate(round = as.numeric(round))\n\n\npr <- result_carr_pilotos %>% filter(driverId==\"hamilton\" | driverId==\"max_verstappen\") %>% rename(pilotos =  driverId)\n\n#más paquetes\nlibrary(ggplot2)\nlibrary(ggthemes)\nlibrary(gganimate)\n\n#gráfico de hamilton y verstappen\npr %>% ggplot(aes(x=round, y=points, color=pilotos, group = pilotos)) + geom_line() + labs(title=\"Clasificación pilotos\",subtitle = \"Entre Hamilton y Verstappen\" , x=\"Carrera\", y=\"Puntos\")\n\n\n#gráfico de todos los pilotos por escudería\ntodos <- result_carr_pilotos \ntodos <- todos %>% rename(pilotos = driverId)\n\ntodos %>% ggplot(aes(x=round, y=points, color=pilotos, group = pilotos)) +\n  geom_line() +  labs(title=\"Clasificación pilotos\",subtitle = \"Entre compañeros de equipo\" , x=\"Carrera\", y=\"puntos\") +\n  facet_wrap(vars(constructorId), nrow = 5, ncol = 5, scales = \"fixed\",  strip.position = \"bottom\")\n\n\n\n```\n\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"show","code-overflow":"wrap","code-link":true,"code-line-numbers":true,"code-tools":true,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","highlight-style":"a11y","css":["my_styles.css"],"toc":true,"toc-depth":3,"output-file":"my_trabajo_BigData.html"},"language":{},"metadata":{"lang":"es","fig-responsive":true,"quarto-version":"1.2.269","knitr":{"opts_chunk":{"collapse":true,"comment":"#>","fig.asp":"7/9","out.width":"95%","fig.align":"center","fig.show":"hold","R.options":"options(scipen = 999)"}},"theme":"flatly","page-layout":"full","code-copy":true,"title":"Temporada 2020-2021 F1","description":"Resumen temporada 2020-2021","author":"Ignacio Muñoz Ayala (igmuoza@alumni.uv.es)","date":"11-01-2022","categories":["trabajo BigData","F1"],"image":"foto_f1.png","title-block-banner":true,"title-block-banner-color":"red","toc-location":"left","smooth-scroll":true,"backgroundcolor":"#209DF0"},"extensions":{"book":{"multiFile":true}}}}}